<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout :: head('Inicio')}"></head>
<body>
<div th:replace="~{layout :: header}"></div>

<main class="container">
    <h1 style="font-size: 2.5rem; font-weight: 700; color: var(--heading-color);">Descubre lo nuevo</h1>
    <div class="product-grid">
        <!-- Iteramos sobre la lista de productos -->
        <div class="product-card" th:each="product : ${products}">
            <a th:href="@{/productos/{id}(id=${product.id})}" style="text-decoration: none;">
                <!-- CORRECCIÓN AQUÍ: de "imageUrl" a "imagenUrl" -->
                <img th:src="${product.imagenUrl}" onerror="this.onerror=null;this.src='https://placehold.co/600x400/e2e8f0/334155?text=Producto';" alt="Imagen del producto">
            </a>
            <div class="product-card-body">
                <h3>
                    <a th:href="@{/productos/{id}(id=${product.id})}" th:text="${product.nombre}" style="text-decoration: none; color: inherit;">Nombre del Producto</a>
                </h3>
                <p class="price" th:text="'S/ ' + ${#numbers.formatDecimal(product.precio, 1, 'COMMA', 2, 'POINT')}">S/ 99.90</p>
                <a th:href="@{/carrito/agregar/{id}(id=${product.id})}" class="btn btn-primary" style="width: 100%;">Añadir al carrito</a>
            </div>
        </div>
    </div>
</main>

<div th:replace="~{layout :: footer}"></div>
</body>
</html>